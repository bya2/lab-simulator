(()=>{var e={644:(e,n,s)=>{const o=s(860).Router(),t=s(246);o.get("/sse",t),e.exports=o},922:(e,n,s)=>{const o=s(860).Router(),t=s(644);o.use(t),e.exports=o},389:(e,n,s)=>{const o=s(282),t=s(17);s(142).config({path:t.resolve(__dirname,"production"===o.env.NODE_ENV?".env":".env.dev")});const r=s(860),_=r();_.use(s(922)),_.use(r.static(t.join(__dirname,"public"))),console.log("OKOK"),_.use(((e,n,s)=>{s(createError(404))})),_.use(((e,n,s,o)=>{s.status(e.status||500).end("error")})),e.exports=_},850:(e,n)=>{n.b={user:process.env.DB_ORACLE__XE__USER,password:process.env.DB_ORACLE__XE__PASSWORD,connectString:process.env.DB_ORACLE__XE__CONNECTIONSTRING,events:!0}},307:(e,n)=>{const s=process.env.SCHEME||"http",o=process.env.HOST||"localhost",t=process.env.PORT||8080;n.config__server_info={SCHEME:s,HOST:o,PORT:t},n.server_url=`${s}://${o}:${t}/`},896:(e,n,s)=>{const o=s(955),t=s(850).b,r=process.env.DB_ORACLE__XE__TABLE_GENERAL,_=process.env.DB_ORACLE__XE__SUBSCRIPTION_NAME,c=`SELECT * FROM ${r} WHERE ROWNUM=1`;e.exports={async fn_connection__xe(){await o.createPool(t),this.conn=await o.getConnection()},fn_oper__at_termination(){try{this.conn&&conn.close().then((()=>{o.getPool().close(10),process.exit(0)}))}catch(e){console.error(`Error: db/index.js - fn_oper__at_termination\n${e}`),process.exit(1)}},fn_subscription__db_table(e){const n={sql:c,callback:()=>{const n={type:o.OUT_FORMAT_OBJECT};this.conn.execute(c,[],n).then((n=>{const s=n.row[0];e.write(`data: ${s}\n\n`),console.log("Success: /db/index.js - fn_subscription__db_table (conn.subscribe)")})).catch((e=>{console.error(`Fail: /db/index.js - fn_subscription__db_table (conn.subscribe)\n${e}`)}))}};this.conn.subscribe(_,n)},fn_unsubscription__db_table(){conn.unsubscribe(_).then((()=>{console.log("Success: /db/index.js - fn_unsubscription__db_table (conn.unsubcribe)")})).catch((e=>{console.error(`Fail: /db/index.js - fn_unsubscription__db_table (conn.unsubcribe)\n${e}`)}))}}},246:(e,n,s)=>{const{fn_subscription__db_table:o,fn_unsubscription__db_table:t}=s(896);e.exports=(e,n)=>{n.setHeader("Content-type","text/event-stream"),o(n).catch((e=>{console.error(`/api/get.js - fn_REST_GET__connect_SSE (fn_subscription__db_table)\n${e}`)})),setTimeout((()=>{t().catch((e=>{console.error(`/api/get.js - fn_REST_GET__connect_SSE (fn_unsubscription__db_table)\n${e}`)}))}),15e3)}},142:e=>{"use strict";e.exports=require("dotenv")},860:e=>{"use strict";e.exports=require("express")},955:e=>{"use strict";e.exports=require("oracledb")},17:e=>{"use strict";e.exports=require("path")},282:e=>{"use strict";e.exports=require("process")}},n={};function s(o){var t=n[o];if(void 0!==t)return t.exports;var r=n[o]={exports:{}};return e[o](r,r.exports,s),r.exports}(()=>{const e=s(282),n=s(17);s(142).config({path:n.resolve(__dirname,"production"===e.env.NODE_ENV?".env":".env.dev")});const{config__server_info:o,server_url:t}=s(307);(async e=>{const n=s(896);await n.fn_connection__xe(),s(389).listen(o.PORT),console.log(t),e.once("SIGTERM",n.fn_oper__at_termination).once("SIGINT",n.fn_oper__at_termination)})(e)})()})();